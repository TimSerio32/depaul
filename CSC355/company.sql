/*
	company.sql
	Eric J. Schwabe
	CSC 355 Spring 2016

	Script to define and populate the example database
	COMPANY, modified from Chapter 3 of Elmasri and Navathe's
	Fundamentals of Database Systems...
*/

-- drop tables

DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;
DROP TABLE DEPARTMENT CASCADE CONSTRAINTS;
DROP TABLE PROJECT CASCADE CONSTRAINTS;
DROP TABLE WORKSON CASCADE CONSTRAINTS;
DROP TABLE DEPENDENT CASCADE CONSTRAINTS;

-- create and populate tables

CREATE TABLE EMPLOYEE
(
	Fname		VARCHAR(20),
	Lname		VARCHAR(20),
	Ssn		CHAR(9),
	Bdate		DATE,
	Address		VARCHAR(30),
	Gender		CHAR(1),
	Salary		NUMBER(5),
	SuperSsn	CHAR(9),
	Dno		NUMBER(1),

	PRIMARY KEY (Ssn),
		
	FOREIGN KEY (SuperSsn)
		REFERENCES EMPLOYEE (Ssn)
);

INSERT INTO EMPLOYEE VALUES ('Susan', 'Westerberg', '121231234', DATE '1960-01-01', '1010 Rockspring, Houston, TX', 'F', 75000, NULL, 1);
INSERT INTO EMPLOYEE VALUES ('John', 'Baines', '888665575', DATE '1947-11-10', '450 Stone, Houston, TX', 'M', 60000, '121231234', 1);
INSERT INTO EMPLOYEE VALUES ('Janine', 'Wallace', '987654321', DATE '1941-06-20', '291 Berry, Bellaire, Tx', 'F', 49000, '888665575', 4);
INSERT INTO EMPLOYEE VALUES ('Amelia', 'Zelaya', '999887777', DATE '1968-01-19', '3321 Castle, Spring, TX', 'F', 26000, '987654321', 4);
INSERT INTO EMPLOYEE VALUES ('Ahmad', 'Jabbar', '987987987', DATE '1969-03-29', '980 Dallas, Houston, TX', 'M', 33000, '987654321', 4);
INSERT INTO EMPLOYEE VALUES ('Frank', 'Wong', '333445555', DATE '1955-12-08', '638 Voss, Houston, TX', 'M', 42000, '888665575', 2);
INSERT INTO EMPLOYEE VALUES ('Jack', 'Smythe', '123456789', DATE '1965-01-09', '731 Fondren, Houston, TX', 'M', 30000, '333445555', 2);
INSERT INTO EMPLOYEE VALUES ('Rakesh', 'Narayan', '666884444', DATE '1980-09-15', '975 Fire Oak, Humble, TX', 'M', 38000, '333445555', 2);
INSERT INTO EMPLOYEE VALUES ('Joanne', 'English', '453453453', DATE '1972-07-31', '5631 Rice, Houston, TX', 'F', 25000, '333445555', 2);
INSERT INTO EMPLOYEE VALUES ('Melinda', 'Jones', '808080808', DATE '1970-07-10', '1001 Western, Houston, TX', 'F', 27500, '333445555', 2);

CREATE TABLE DEPARTMENT
(
	Dname		VARCHAR(20),
	Dnumber		NUMBER(1),
	MgrSsn		CHAR(9),
	MgrStartDate	DATE,
	
	PRIMARY KEY (Dnumber),

	FOREIGN KEY (MgrSsn)
		REFERENCES EMPLOYEE (Ssn)
);

INSERT INTO DEPARTMENT VALUES ('Headquarters', 1, '888665575', DATE '1981-06-19');
INSERT INTO DEPARTMENT VALUES ('Marketing', 2, '333445555', DATE '1988-05-22');
INSERT INTO DEPARTMENT VALUES ('Administration', 4, '987654321', DATE '1995-01-01');


-- this alter is needed to allow PROJECT and DEPARTMENT to reference each other

ALTER TABLE EMPLOYEE ADD FOREIGN KEY (Dno) REFERENCES DEPARTMENT (Dnumber);

CREATE TABLE PROJECT
(
	Pname		VARCHAR(20),
	Pnumber		NUMBER(3),
	Plocation	VARCHAR(20),

	PRIMARY KEY (Pnumber)
);

INSERT INTO PROJECT VALUES ('ProductX', 100, 'Bellaire');
INSERT INTO PROJECT VALUES ('ProductY', 200, 'Sugarland');
INSERT INTO PROJECT VALUES ('ProductZ', 300, 'Houston');
INSERT INTO PROJECT VALUES ('Computerization', 400, 'Stafford');
INSERT INTO PROJECT VALUES ('Reorganization', 500, 'Houston');
INSERT INTO PROJECT VALUES ('Newbenefits', 600, 'Stafford');

CREATE TABLE WORKSON
(
	Essn		CHAR(9),
	Pno		NUMBER(3),
	Hours		NUMBER(3,1),
	
	PRIMARY KEY (Essn, Pno),

	FOREIGN KEY (Essn)
		REFERENCES EMPLOYEE (Ssn),

	FOREIGN KEY (Pno)
		REFERENCES PROJECT(Pnumber)
);

INSERT INTO WORKSON VALUES ('123456789', 100, 20.0);
INSERT INTO WORKSON VALUES ('123456789', 200, 18.0);
INSERT INTO WORKSON VALUES ('453453453', 100, 32.0);
INSERT INTO WORKSON VALUES ('453453453', 200, 12.0);
INSERT INTO WORKSON VALUES ('333445555', 100, 10.0);
INSERT INTO WORKSON VALUES ('333445555', 200, 10.0);
INSERT INTO WORKSON VALUES ('333445555', 300, 15.0);
INSERT INTO WORKSON VALUES ('333445555', 400, 10.0);
INSERT INTO WORKSON VALUES ('333445555', 500, 20.0);
INSERT INTO WORKSON VALUES ('333445555', 600, 5.0);
INSERT INTO WORKSON VALUES ('999887777', 600, 20.0);
INSERT INTO WORKSON VALUES ('999887777', 400, 10.0);
INSERT INTO WORKSON VALUES ('987987987', 400, 35.0);
INSERT INTO WORKSON VALUES ('987987987', 600, 5.0);
INSERT INTO WORKSON VALUES ('987654321', 600, 20.0);
INSERT INTO WORKSON VALUES ('987654321', 500, 15.0);
INSERT INTO WORKSON VALUES ('888665575', 500, 12.0);
INSERT INTO WORKSON VALUES ('121231234', 500, 12.0);

CREATE TABLE DEPENDENT
(
	Essn		CHAR(9),
	DependentName	VARCHAR(20),
	Sex		CHAR(1),
	Bdate		DATE,
	Relationship 	VARCHAR(10),

	PRIMARY KEY (Essn, DependentName),

	FOREIGN KEY (Essn)
		REFERENCES EMPLOYEE (Ssn)
);

INSERT INTO DEPENDENT VALUES ('333445555', 'Alice', 'F', DATE '1986-04-05', 'Daughter');
INSERT INTO DEPENDENT VALUES ('333445555', 'Theodore', 'M', DATE '1983-10-25', 'Son');
INSERT INTO DEPENDENT VALUES ('333445555', 'Joy', 'F', DATE '1958-05-03', 'Spouse');
INSERT INTO DEPENDENT VALUES ('987654321', 'Andrew', 'M', DATE '1988-01-04', 'Son');
INSERT INTO DEPENDENT VALUES ('987654321', 'Jennifer', 'F', DATE '1988-01-04', 'Daughter');
INSERT INTO DEPENDENT VALUES ('123456789', 'John', 'M', DATE '1988-02-28', 'Son');
INSERT INTO DEPENDENT VALUES ('123456789', 'Alice', 'F', DATE '1988-12-30', 'Daughter');
INSERT INTO DEPENDENT VALUES ('123456789', 'Elizabeth', 'F', DATE '1967-05-05', 'Spouse');
INSERT INTO DEPENDENT VALUES ('453453453', 'Joyce', 'F', DATE '1990-04-05', 'Daughter');
INSERT INTO DEPENDENT VALUES ('987987987', 'Nabil', 'M', DATE '1999-08-05', 'Son');

-- display contents of tables

SELECT * FROM EMPLOYEE;
SELECT * FROM DEPARTMENT;
SELECT * FROM PROJECT;
SELECT * FROM WORKSON;
SELECT * FROM DEPENDENT;

COMMIT;

